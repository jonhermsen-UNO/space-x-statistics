<!doctype html>
<html lang="en" class="h-100">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="shortcut icon" type="image/icon" href="./assets/favicon.ico"/>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.3/dist/cosmo/bootstrap.min.css" crossorigin="anonymous">
	<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"> -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.10/css/all.min.css" crossorigin="anonymous">

	<title>SpaceX Statistics</title>
</head>

<body class="bg-dark text-light h-100">
	<div id="app-main" class="d-flex flex-column h-100">
		<nav class="navbar navbar-expand-lg navbar-dark bg-dark border-bottom position-sticky mb-3" style="top:0;z-index:1;">
			<div class="container-fluid">
				<a href="https://www.spacex.com/" target="_blank"
					class="navbar-brand text-monospace text-center">
					<img src="./assets/logo.png" alt="SpaceX"><br>
					<span class="h5">Statistics</span>
				</a>
				<form class="form-inline">
					<button type="button" class="btn btn-link text-light mr-5 d-none d-lg-inline"
						data-toggle="modal" data-target="#dataModal">
						View data
					</button>
					<button type="button" class="btn btn-lg btn-dark"
						v-on:click="slideIndex--"
						v-bind:disabled="!slideIndex">
						<i class="fas fa-fw fa-chevron-left"></i>
					</button>
					<span class="mx-3">{{ slideIndex }}</span>
					<button type="button" class="btn btn-lg btn-dark"
						v-on:click="slideIndex++">
						<i class="fas fa-fw fa-chevron-right"></i>
					</button>
				</form>
			</div>
		</nav>

		<div class="flex-grow-1 d-flex flex-column justify-content-center">
			<div id="dataModal" class="modal">
				<div class="modal-dialog modal-xl modal-dialog-centered">
					<div class="modal-content bg-dark">
						<div class="modal-header">
							<div class="modal-title h4">Data</div>
							<button type="button" class="close" data-dismiss="modal">
								<span class="text-light">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<pre class="text-light p-2" style="max-height:calc(100vh - 12rem)">{{ projectData }}</pre>
							<a href="https://docs.spacexdata.com/?version=latest" target="_blank"
								class="text-light">View documentation</a>
						</div>
					</div>
				</div>
			</div>

			<section class="text-center"
				v-if="isLoading">
				<span class="fas fa-3x fa-spinner fa-pulse"></span>
			</section>
			<main class="container-fluid"
				v-else id="SlideDeck">
				<!-- Intro slide -->
				<!-- TODO: remove separators -->
				<!-- TODO: enable slide functionality -->
				<!-- v-bind:class="{ 'd-none': (slideIndex !== 0) }" -->
				<div class="jumbotron bg-dark mb-0">
					<div class="row align-items-center">
						<div class="col-12 col-lg-4 offset-lg-2 text-center text-lg-left mb-3">
							<p class="lead text-muted mb-4">CIST 2500<br>Jon Hermsen</p>
							<h1>r/SpaceX API</h1>
							<h2>Launch Statistics</h2>
						</div>
						<div class="col-12 col-lg-4 text-center mb-3">
							<img src="./assets/hero-image.jpg" alt="Falcon 9 launch" class="img-fluid rounded-lg">
						</div>
					</div>
				</div>
				<!-- Topic slide --><hr class="border-light">
				<div class="jumbotron bg-dark mb-0">
					<div class="row align-items-center">
						<div class="col-12 col-lg-8 offset-lg-2 mb-3">
							<h2>Research Questions</h2>
							<p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
							Donec quis massa aliquam, iaculis ipsum eu, mattis ex. Nullam volutpat iaculis
							ex, in hendrerit risus feugiat.</p>
							<ul>
								<li>Lorem ipsum dolor sit amet</li>
								<li>Consectetur adipiscing elit</li>
								<li>Donec quis massa aliquam, iaculis ipsum eu, mattis ex</li>
								<li>Nullam volutpat iaculis ex, in hendrerit risus feugiat</li>
							</ul>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>

	<!-- Standard libraries -->
	<script src="https://cdn.jsdelivr.net/npm/vue@2.6/dist/vue.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/lodash@4.17/lodash.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.15/dist/umd/popper.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
	<!-- Statistics libraries -->
	<script src="https://cdn.jsdelivr.net/npm/jstat@1.9/dist/jstat.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/d3@5.14/dist/d3.min.js" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/c3@0.7/c3.min.js" crossorigin="anonymous"></script>
	<script>
	(function () {
		"use strict";

		var vueData = {},
			vueMethods = {},
			vueComputed = {};

		vueData.alpha = 0.05;
		vueData.precision = 2;
		vueData.slideIndex = 0;
		vueData.isLoading = false;
		vueData.projectData = [];

		vueMethods.getData = function () {
			var app = this;

			app.isLoading = true;

			jQuery.getJSON("https://api.spacexdata.com/v3/launches")
			.then(function (data) {
				app.projectData = _(data)
					.filter({ upcoming: false })
					.filter([ "rocket.rocket_name", "Falcon 9" ])
					.value();

				app.isLoading = false;
			});
		};

		new Vue({
			el: "#app-main",
			data: vueData,
			methods: vueMethods,
			computed: vueComputed,
			mounted: function () { this.getData(); }
		});
	})();
	</script>
</body>

</html>
